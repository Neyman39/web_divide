<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/css/k_card_style copy.css">
    <link rel="stylesheet" href="assets/css/k_card_phone.css">
    <link rel="stylesheet" href="assets/css/navpanel.css">
    <link rel="stylesheet" href="assets/css/navpanel_phone.css">
    <link rel="stylesheet" href="assets/css/footer.css">
    <link rel="stylesheet" href="assets/css/footer_phone.css">
    <link rel="stylesheet" href="assets/css/slider.css">
    <link rel="stylesheet" href="assets/css/slider_phone.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Press+Start+2P&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Ubuntu+Sans+Mono:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=VT323&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyDivide</title>
</head>
<body>
    
<header class="header">
    <div class="container">
        <div class="header__inner">
            <div><a class="header__logo" href="Главная.html">KeyDivide</a></div>

            <nav class="nav">
                <ul>
                    <li class="_link"><a class="nav__link" href="Главная.html#keyboards">Клавиатуры</a></li>
                    <li class="_link"><a class="nav__link" href="Главная.html#services">Услуги</a></li>
                    <li class="_link"><a class="nav__link" href="Главная.html#aboutus">О нас</a></li>
                    <li class="_link"><a class="nav__link" href="#">Соцсети</a>
                        <ul class="url">
                            <li class="two_link" style="margin-top: 10px;"><a class="url__link" href="https://discord.gg/PKZ8ejUB8Z" target="_blank">Discord</a></li>
                            <li class="two_link"><a class="url__link" href="https://vk.com/cacao_keyboards" target="_blank">Вконтакте</a></li>
                            <li class="two_link"><a class="url__link" href="https://www.youtube.com/@cacaoboards7930/featured" target="_blank">YouTube</a></li>
                        </ul>
                    </li>					
                </ul>   
            </nav>
        </div>
        <!-- Блок для приветствия -->
        <div style="flex-direction: row; display: flex; align-items: center;">
            <div id="authStatus"></div>
            <a class="ikon" id="account" href="Авторизация.html" title="Профиль"><img src="assets/images/аккаунт.png" width="26" height="24"></a>
            <a class="ikon" href="Корзина.html" title="Корзина"><img src="assets/images/корзина.png" width="26" height="26"></a>
        </div>
    </div>
</header>

<header class="header_phone">
    <div class="container">
        <div class="header__inner">
            <nav class="nav">
                <ul>
                    <li class="_link"><a class="nav__link" href="#" style="font-size: 30px;">=</a>
                        <ul class="url">
                            <li class="two_link"><a class="nav__link" href="Главная.html#keyboards">Клавиатуры</a></li>
                            <li class="two_link"><a class="nav__link" href="Главная.html#services">Услуги</a></li>
                            <li class="two_link"><a class="nav__link" href="Главная.html#aboutus">О нас</a></li>
                            <li class="two_link" style="margin-top: 10px;"><a class="nav__link" href="https://discord.gg/PKZ8ejUB8Z" target="_blank">Discord</a></li>
                            <li class="two_link"><a class="nav__link" href="https://vk.com/cacao_keyboards" target="_blank">Вконтакте</a></li>
                            <li class="two_link"><a class="nav__link" href="https://www.youtube.com/@cacaoboards7930/featured" target="_blank">YouTube</a></li>
                        </ul>
                    </li>					
                </ul>   
            </nav>
            <div><a class="header__logo" href="Главная.html">KeyDivide</a></div>
            <div>
    		    <a class="ikon" href="Авторизация.html" title="Профиль"><img src="assets/images/аккаунт.png" width="26" height="24"></a>
    		    <a class="ikon" href="Корзина.html" title="Корзина"><img src="assets/images/корзина.png" width="26" height="26"></a>
    	    </div>
        </div>
    </div>
</header>

<div class="intro">
    <div class="baza">
        <div class="think_about_title">
                <div class="slider-container">
                    <button class="prev-btn" aria-label="Посмотреть следующий слайд"><img src="assets/images/стрелка.png" alt="aaa" width="20" height="20" style="rotate: 180deg;"></button>
                    <div class="slider">
                        <img src="assets/images/orto_black/orto_b1.jpg" alt="Image 1" class="main-image" width="810" height="440">
                    </div>
                    <button class="next-btn" aria-label="Посмотреть предыдущий слайд"><img src="assets/images/стрелка.png" alt="aaa" width="20" height="20"></button>
                </div> 
                <div class="thumbnail-container-phone">
                    <div class="thumbnail-list">
                        <img src="assets/images/orto_black/orto_b1.jpg" alt="Image 1" class="thumbnail active">
                        <img src="assets/images/orto_black/orto_b2.jpg" alt="Image 2" class="thumbnail">
                        <img src="assets/images/orto_black/orto_b3.jpg" alt="Image 3" class="thumbnail" >
                        <img src="assets/images/orto_black/orto_b4.jpg" alt="Image 4" class="thumbnail" >
                        <img src="assets/images/orto_black/orto_b5.jpg" alt="Image 5" class="thumbnail" >
                        <img src="assets/images/orto_black/orto_b6.jpg" alt="Image 6" class="thumbnail" >
                    </div>
                </div> 
        </div>
        <div class="prod_info">
            <div class="wrapper">
                <h1 class="typing-demo" id="typing-demo" style="width: 26ch;">CacaoSplit Ortomini Black </h1>
            </div>
            <div class="box-prod"><p class="prod" href="#">Маленькая клавиатура без ряда цифр, с ортолинейным строением и поддержкой via на основе двух контроллеров arduino pro micro</p></div>
            <div class="form">
                <h2>Переключатели</h2>
                <div class="switches">
                    <button class="config-button" data-config="config1"><div class="swbox">Akko V3 Cream Yellow
                        <div class="overlay">
                            <div style="padding: 15px;">
                                <div class="about_sw">
                                    <div class="sw-image"><img src="assets/images/akko-yellow.png" alt="" width="80" height="80"></div>
                                    <div class="name-sw">
                                        <p style="font-size: 19px;">Akko V3 Cream Yellow</p>
                                        <div class="type">линейные</div>
                                    </div>
                                </div>
                                <div class="swith-specs">
                                    <div class="spec-line"><p>Сила срабатывания</p><p>48g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Сила до упора</p><p>60g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Сила тактильности</p><p>none</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Длина пути</p><p>2.0mm / 3.3mm</p></div>
                                    <div class="li_line"></div>
                                </div>
                            </div>
                        </div>
                    </div></button>
                    <button class="config-button" data-config="config2"><div class="swbox">Akko V3 Cream Blue
                        <div class="overlay">
                            <div style="padding: 15px;">
                                <div class="about_sw">
                                    <div class="sw-image"><img src="assets/images/akko-blue.png" alt="" width="80" height="80"></div>
                                    <div class="name-sw">
                                        <p style="font-size: 19px;">Akko V3 Cream Blue</p>
                                        <div class="type">тактильные</div>
                                    </div>
                                </div>
                                <div class="swith-specs">
                                    <div class="spec-line"><p>Сила срабатывания</p><p>45g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Сила до упора</p><p>60g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Сила тактильности</p><p>55g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Длина пути</p><p>2.2mm / 3.3mm</p></div>
                                    <div class="li_line"></div>
                                </div>
                            </div>
                        </div>
                    </div></button>
                    <button class="config-button" data-config="config3"><div class="swbox">Outemu Silent Peach
                        <div class="overlay">
                            <div style="padding: 15px;">
                                <div class="about_sw">
                                    <img src="assets/images/outemu-peach.png" alt="oo" width="80" height="80" style="border-radius: 10px;">
                                    <div class="name-sw">
                                        <p style="font-size: 19px;">Outemu Silent Peach</p>
                                        <div class="type" style="width: 150px;">линейные тихие</div>
                                    </div>
                                </div>
                                <div class="swith-specs">
                                    <div class="spec-line"><p>Сила срабатывания</p><p>45g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Сила до упора</p><p>55g</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Сила тактильности</p><p>none</p></div>
                                    <div class="li_line"></div>
                                    <div class="spec-line"><p>Длина пути</p><p>2.0mm / 3.3mm</p></div>
                                    <div class="li_line"></div>
                                </div>
                            </div>
                        </div>
                    </div></button>
                </div>
            </div>
            <div class="box-price"><p class="price" id="price">9890 ₽</p></div>
            <div class="butt">
               <div id="addToCartBtn" class="button" style="cursor:pointer;">
                  <p>В корзину</p>
                  <img src="assets/images/корзина.png" alt="" width="26" height="24"> 
               </div>
               <div class="deliver"><p>Бесплатная доставка от 4 дней 🚚</p></div>
            </div>
        </div>
    </div>
    <div class="card">
        <div class="thumbnail-container">
            <div class="thumbnail-list">
                <img src="assets/images/orto_black/orto_b1.jpg" alt="Image 1" class="thumbnail active">
                <img src="assets/images/orto_black/orto_b2.jpg" alt="Image 2" class="thumbnail">
                <img src="assets/images/orto_black/orto_b3.jpg" alt="Image 3" class="thumbnail" >
                <img src="assets/images/orto_black/orto_b4.jpg" alt="Image 4" class="thumbnail" >
                <img src="assets/images/orto_black/orto_b5.jpg" alt="Image 5" class="thumbnail" >
                <img src="assets/images/orto_black/orto_b6.jpg" alt="Image 6" class="thumbnail" >
            </div>
        </div>
        <div class="terminal">
            <div class="header_code">
              <span class="icon red"></span>
              <span class="icon yellow"></span>
              <span class="icon green"></span>
              <h2>Ortomini Black Info.json</h2>
            </div>
            <div class="json_style">
                <div class="numbers">1 2 3 4 5 6 7 8 9 10 11 12</div>
                <pre class="code">
"specifications": {
    <span class="key1">"Материал клавиш"</span>: <span class="value1">"PBT"</span>,
    <span class="key1">"Профиль кейкапов"</span>: <span class="value1">"Cherry"</span>,
    <span class="key1">"Конструкция"</span>: <span class="value1">"Треймаунт"</span>,
    <span class="key1">"Переключатели"</span>: <span class="value1">"Akko V3 Cream Yellow (линейные 50г.)"</span>,
    <span class="key1">"Кол-во переключателей"</span>: <span class="value1">"52 шт."</span>,
    <span class="key1">"Поддержка hot-swap"</span>: <span class="value1">"Есть"</span>,
    <span class="key1">"Светодиоды"</span>: <span class="value1">"нет"</span>,
    <span class="key1">"Типы разъемов"</span>: <span class="value1">"usb type-c / trrs"</span>,
    <span class="key1">"Гарантия"</span>: <span class="value1">"1 год"</span>
}
                </pre>
                <div class="numbers">1 2 3 4 5 6 7 8</div>
                <pre class="code">
"equipment": [
    <span class="key1">"Клавиатура"</span>,
    <span class="key1">"Коробка"</span>,
    <span class="key1">"Кабель usb type-c"</span>,
    <span class="key1">"Кабель trrs"</span>,
    <span class="key1">"Кейкап-пуллер"</span>
]
                </pre>
            </div>
        </div>

        <div class="glass-panel">
            <p>Этот текст находится на панели с эффектом мутного стекла</p>
        </div>

        <div class="specs">
            <div class="bombom">
                <h3 class="spectitle">Характеристики</h3>
                <div class="haracter">
                    <p class="spectext">Материал клавиш</p>
                    <p class="spectext2">PBT</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Профиль кейкапов</p>
                    <p class="spectext2">Cherry</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Конструкция</p>
                    <p class="spectext2">треймаунт</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Переключатели</p>
                    <p class="spectext2">akko v3 cream yellow (линейные 50г.)</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Кол-во переключателей</p>
                    <p class="spectext2">52 шт.</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Поддержка hot-swap</p>
                    <p class="spectext2">есть</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Светодиоды</p>
                    <p class="spectext2">нет</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Типы разъемов</p>
                    <p class="spectext2">usb type-c / trrs</p>
                </div>
                <div class="li_line"></div>
                <div class="haracter">
                    <p class="spectext">Гарантия</p>
                    <p class="spectext2">год</p>
                </div>
                <div class="li_line"></div>
                
            </div>
            <div class="bombom2">
                <h3>Комплектация</h3>
                <div class="complect">
                    <div class="dot"></div>
                    <p>Клавиатура</p>
                </div>
                <div class="complect">
                    <div class="dot"></div>
                    <p>Коробка</p>
                </div>
                <div class="complect">
                    <div class="dot"></div>
                    <p>Кабеля: usb type-c и trrs</p>
                </div>
                <div class="complect">
                    <div class="dot"></div>
                    <p>Кейкап-пуллер</p>
                </div>
            </div>
        </div>
    </div>
</div>  
    
</div>
<div class="footer">
    <div class="footbox">
        <div class="line"></div>
        <div class="colums">
            <div class="col1">
                <h1>KeyDivide</h1>
                <p>made by people for people</p>
            </div>
            <div class="colinfo">
                <div class="col2">
                    <h1 class="coltitle">Магазин</h1>
                    <p class="coltext"><a href="Главная.html#keyboards">Клавиатуры</a></p>
                    <p class="coltext"><a href="Главная.html#services">Услуги</a></p>
                </div>
                <div class="col3">
                    <h1 class="coltitle">Соцсети</h1>
                    <a href="https://discord.gg/PKZ8ejUB8Z" target="_blank"><p class="coltext">Discord</p></a>
                    <a href="https://vk.com/cacao_keyboards" target="_blank"><p class="coltext">Вконтакте</p></a>
                    <a href="https://www.youtube.com/@cacaoboards7930/featured" target="_blank"><p class="coltext">YouTube</p></a>  
                </div>
                <div class="col4">
                    <h1 class="coltitle">Инфо</h1>
                    <p class="coltext"><a href="Главная.html#aboutus">О нас</a></p>
                </div>
                <div class="col5">
                    <h1 class="coltitle">Контакты</h1>
                    <p class="coltext">of_keydivide@mail.ru</p>
                </div>
            </div>
        </div>
    </div>
    <div class="by">
        <div class="byby">
            <p>©CacaoBoards All Rights Reserved</p>
            <p>Designed with ❤️ by neyman</p>
        </div>
    </div>
</div>
<script>
    // Строки, которые будут "печататься" в терминале
    const lines = [
    "> INITIALIZING KEYDIVIDE v2.1...",
    "  [OK] Memory check",
    "  [OK] Keyboard driver loaded",
    "  [INFO] Hot-swap module: active",
    "  [INFO] RGB lighting: disabled",
    "> Scanning firmware...",
    "  [OK] All devices ready",
    " ",
    "　　　　　／フ---/フ",
    "　　　　　| 　_　 _|",
    "　 　　　／`ミ _x 彡",
    "　　 　 /　　　 　 |",
    "　　　 /　 ヽ　　 ﾉ",
    "　／￣|　　 |　|　|",
    "　| (￣ヽ＿_ヽ_)_)",
    "　＼二つ",
    "> SYSTEM READY. WELCOME, USER."
    ];

    // const lines = [
    // "> INITIALIZING KEYDIVIDE v2.1...",
    // "  [OK] Memory check",
    // "  [OK] Keyboard driver loaded",
    // "  [INFO] Hot-swap module: active",
    // "  [INFO] RGB lighting: disabled",
    // "> Scanning firmware...",
    // "  [OK] All devices ready",
    // " ",
    // "　　　　　／＞　 フ",
    // "　　　　　| 　_　 _|",
    // "　 　　　／`ミ _x 彡",
    // "　　 　 /　　　 　 |",
    // "　　　 /　 ヽ　　 ﾉ",
    // "　／￣|　　 |　|　|",
    // "　| (￣ヽ＿_ヽ_)_)",
    // "　＼二つ",
    // "> SYSTEM READY. WELCOME, USER."
    // ];
  
    const terminal1 = document.getElementById('terminal1');
    const cursor = document.querySelector('.cursor');
  
    let lineIndex = 0;
    let charIndex = 0;
    let currentLine = '';
  
    // Функция, имитирующая печать текста
    function typeLine() {
        if (lineIndex >= lines.length) {
          // Завершаем анимацию
          setTimeout(() => {
            document.getElementById('terminal-screen').style.display = 'none'; // none
            const main = document.getElementById('main-content');
            main.style.display = 'block'; // block
            setTimeout(() => {
                main.style.opacity = '1'; // 1
            }, 100);
          }, 500);
          return;
        }

  const currentLine = lines[lineIndex];

  // Формируем текущий текст: уже напечатанное + новый символ
  const printed = currentLine.substring(0, charIndex + 1);

  // Очищаем терминал и вставляем всё с новым курсором
  terminal.innerHTML = lines
    .slice(0, lineIndex) // Все предыдущие строки
    .map(line => line + '<br>')
    .join('') +
    printed + // Текущая строка — до текущего символа
    '<span class="cursor">█</span>'; // Курсор в конце

  charIndex++;

  if (charIndex === currentLine.length) {
    charIndex = 0;
    lineIndex++;
    if (lineIndex == 6) {
        setTimeout(typeLine, 1000);
    }
    else setTimeout(typeLine, Math.random() * 200 + 50); // Задержка между строками
  } 
  else setTimeout(typeLine, 15 + Math.random() * 15); // Быстрая печать
}
  
    // Запуск анимации при загрузке
    document.addEventListener('DOMContentLoaded', async () => {
      await typeLine();
    });
</script>

<script src="script.js"></script>
<script src="check_authorization.js"></script>


<script>
    // Проверка авторизации при загрузке страницы
    document.addEventListener('DOMContentLoaded', async () => {
      await checkAuthAndDisplayUser();
      setupCartButton();
    });

    // Настройка кнопки добавления в корзину
    function setupCartButton() {
        document.getElementById('addToCartBtn')?.addEventListener('click', async () => {
            try {
                // Проверяем авторизацию
                const response = await fetch('http://localhost:5000/check-auth', {
                    headers: {
                        'Authorization': localStorage.getItem('authToken') || ''
                    }
                });
            
                if (!response.ok) {
                    alert('Пожалуйста, войдите в аккаунт, чтобы добавлять товары в корзину.');
                    window.location.href = 'Авторизация.html';
                    return;
                }
            
                const { user } = await response.json();
                
                // Получаем текущую цену товара (может понадобиться чуть более сложная логика)
                const priceText = document.getElementById('price').textContent; // например, "8940 ₽"
                const price = parseFloat(priceText.replace(/[^\d.-]/g, '')); // извлекаем число
                
                // Название товара
                const productName = document.getElementById('typing-demo').textContent;
                
                // Название или описание выбранного товара, если есть
                const productDescription = "Маленькая клавиатура даже без ряда цифр, с ортолинейным строением..."; // или динамически
            
                // Ключ корзины для этого пользователя
                const cartKey = `cart_${user.name}`;
                let cart = JSON.parse(localStorage.getItem(cartKey)) || [];
            
                // Можно хранить один товар или делать уникальный ключ для комбинации товара + цена — тут пример по имени
                const existingItem = cart.find(item => item.productName === productName);
            
                if (existingItem) {
                    existingItem.quantity += 1;
                } 
                else {
                    cart.push({
                        productName: productName,
                        description: productDescription,
                        price: price,
                        quantity: 1
                    });
                }
                localStorage.setItem(cartKey, JSON.stringify(cart));
                alert('Товар добавлен в корзину!');
            } 
            catch (error) {
                console.error('Ошибка:', error);
                alert('Произошла ошибка при добавлении в корзину');
            }
        });
    }
</script>


<script>
    // Определяем объект с различными конфигурациями и их ценами
    const configurations = {
      'config1': 9890,
      'config2': 9890,
      'config3': 9450
    };

    // Получаем элементы на странице
    const configButtons = document.querySelectorAll('.config-button');
    const priceElement = document.getElementById('price');

    // Выбранная конфигурация по умолчанию
    let selectedConfig = 'config1';

    // Функция для обновления обводки кнопок
    function updateButtonBorder() {
      configButtons.forEach(button => {
        button.style.border = button.getAttribute('data-config') === selectedConfig ? '1.5px solid rgb(255, 122, 105)' : '1.5px solid rgb(96, 96, 96)';
      });
    }

    // Обработчик нажатия на кнопки конфигурации
    configButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Получаем выбранную конфигурацию из атрибута data-config
        selectedConfig = this.getAttribute('data-config');

        // Обновляем цену на странице
        priceElement.textContent = configurations[selectedConfig] + ' ₽';

        // Обновляем обводку кнопок
        updateButtonBorder();
      });
    });

    // Инициализация обводки кнопок при загрузке страницы
    updateButtonBorder();
</script>
</body>
</html>
