<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>KeyDivide</title>
	<link rel="stylesheet" href="assets/css/navpanel.css">
  	<link rel="stylesheet" href="assets/css/navpanel_phone.css">
	<link rel="stylesheet" href="assets/css/Главная страница/Главная copy.css">
  	<link rel="stylesheet" href="assets/css/Главная страница/Главная-phone.css">
	<link rel="stylesheet" href="assets/css/footer.css">
  	<link rel="stylesheet" href="assets/css/footer_phone.css">
  	<link rel="stylesheet" href="assets/css/services-filt.css">
    <link rel="stylesheet" href="assets/css/Главная страница/product-card.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Ubuntu+Sans+Mono:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
  
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<header class="header">
    <div class="container">
        <div class="header__inner">
            <div><a class="header__logo" href="Главная.html">KeyDivide</a></div>

            <nav class="nav">
                <ul>
                    <li class="_link"><a class="nav__link" href="#keyboards">Клавиатуры</a></li>
                    <li class="_link"><a class="nav__link" href="#services">Услуги</a></li>
                    <li class="_link"><a class="nav__link" href="#aboutus">О нас</a></li>
                    <li class="_link"><a class="nav__link" href="#">Соцсети</a>
                        <ul class="url">
                            <li class="two_link" style="margin-top: 10px;"><a class="url__link" href="https://discord.gg/PKZ8ejUB8Z" target="_blank">Discord</a></li>
                            <li class="two_link"><a class="url__link" href="https://vk.com/cacao_keyboards" target="_blank">Вконтакте</a></li>
                            <li class="two_link"><a class="url__link" href="https://www.youtube.com/@cacaoboards7930/featured" target="_blank">YouTube</a></li>
                        </ul>
                    </li>					
                </ul>   
            </nav>
        </div>
        <!-- Блок для приветствия -->   
		    <div style="flex-direction: row; display: flex; align-items: center;">
          <div id="authStatus"></div>
		    	<a class="ikon" id="account" href="Авторизация.html" title="Профиль"><img src="assets/images/аккаунт.png" width="26" height="24"></a>
		    	<a class="ikon" href="Корзина.html" title="Корзина"><div class="prod_count">1</div><img src="assets/images/корзина.png" width="26" height="26"></a>
		    </div>
    </div>
</header>

<header class="header_phone">
    <div class="container">
        <div class="header__inner">
            <nav class="nav">
                <ul>
                    <li class="_link"><a class="nav__link" href="#" style="font-size: 30px;">=</a>
                        <ul class="url">
                            <li class="two_link"><a class="nav__link" href="Главная.html#keyboards">Клавиатуры</a></li>
                            <li class="two_link"><a class="nav__link" href="Главная.html#services">Услуги</a></li>
                            <li class="two_link"><a class="nav__link" href="Главная.html#aboutus">О нас</a></li>
                            <li class="two_link" style="margin-top: 10px;"><a class="nav__link" href="https://discord.gg/PKZ8ejUB8Z" target="_blank">Discord</a></li>
                            <li class="two_link"><a class="nav__link" href="https://vk.com/cacao_keyboards" target="_blank">Вконтакте</a></li>
                            <li class="two_link"><a class="nav__link" href="https://www.youtube.com/@cacaoboards7930/featured" target="_blank">YouTube</a></li>
                        </ul>
                    </li>					
                </ul>   
            </nav>
            <div><a class="header__logo" href="Главная.html">KeyDivide</a></div>
            <div>
    		    <a class="ikon" href="Авторизация.html" title="Профиль"><img src="assets/images/аккаунт.png" width="26" height="24"></a>
    		    <a class="ikon" href="Корзина.html" title="Корзина"><img src="assets/images/корзина.png" width="26" height="26"></a>
    	    </div>
        </div>
    </div>
</header>
	
<div class="container_k">
	<div class="welcome-banner">
	    <h1 class="welcome-banner__title">KeyDivide</h1>
	    <p class="welcome-banner__description">Интернет магазин, где вы можете найти для себя эргономичную клавиатуру, приобрести услуги моддинга или заказать сборку клавиатуры под свои предпочтения </p>
	    <div class="welcome-banner__buttons">
          <a href="#keyboards" class="main-button"> К клавиатурам </a>
	        <a href="#services" class="main-button">К услугам</a>
      </div>
	</div>
</div>						



<div class="container_usl">
    <a name="keyboards"></a>
    <div class="klaviatura">
        <div class="filter">
            <div style="width: 180px;"></div>
            <div id="SM2"><h3> Клавиатуры </h3></div>
            <div class="filter-container">
                <button class="filter-btn" onclick="toggleFilterDropdown()"> <span class="filter-text">Рекомендуемые</span><img src="assets/images/n-стрелка.png" alt="" width="12" height="12"></button>
                <div class="filter-dropdown">
                    <div class="filter-option" onclick="applyFilter('all')">Рекомендуемые</div>
                    <div class="filter-option" onclick="applyFilter('asc')">По возрастанию цены</div>
                    <div class="filter-option" onclick="applyFilter('desc')">По убыванию цены</div>
                </div>
            </div>
        </div>
        
        <div class="product-container">
            <!-- Карточки товаров будут динамически добавляться здесь -->
        </div>
    </div>
    <a name="services"></a>

    <div class="klaviatura">
        <div class="filter">
            <div style="width: 180px;"></div>
            <div id="SM2"><h3> Услуги </h3></div>
            <div class="filter-container3">
                <button class="filter-btn3" onclick="toggleFilterDropdowne()"> 
                  <span class="filter-text3">Рекомендуемые</span>
                  <img src="assets/images/n-стрелка.png" alt="" width="12" height="12">
                </button>
                <div class="filter-dropdown3">
                    <div class="filter-option3" onclick="applyFilterD('allo')">Рекомендуемые</div>
                    <div class="filter-option3" onclick="applyFilterD('asce')">По возрастанию цены</div>
                    <div class="filter-option3" onclick="applyFilterD('desce')">По убыванию цены</div>
                </div>
            </div>
        </div>
        
        <div class="product-container3">
            <!-- Карточки товаров будут динамически добавляться здесь -->
        </div>
    </div>

    <a name="aboutus"></a>
</div>

<div class="aboutus">
  <div class="aboutus__inner">
    <h3 class="aboutus__title"> Мы создаем и модернизируем клавиатуры, для того чтобы ваше взаимодействие с компьютером стало более удобным и приятным</h3>
    <div class="about">
        <div class="text_about">
            <div class="SM4"> 
                <p> Мы беспокоимся за руки людей, которые проводят много времени за
                компьютером, так как при печати на обычных клавиатурах запястья 
                перенапрягаются. Поэтому мы стараемся предоставлять эргономичные
                клавиатуры лучшего качества по конкурентноспособным ценам, что бы    
                снять это напряжение и увеличить удобство использования</p>
    
                <p>Также мы предоставляем услуги моддинга и обслуживания для ваших
                клавиатур или даже можем собрать новую под ваши предпочтения</p>
            </div>
            <div class="butt1">
                <a href="#keyboards" class="main-button"> К клавиатурам </a>
                <a href="#services" class="main-button">К услугам </a>
            </div>
        </div>
        <div class="SM6"><img src="https://giffun.ru/wp-content/uploads/2022/08/bongo-cat-typing.gif" width="370" height="285" alt="почему так"></div>
    </div>
  </div>
</div>

<div class="footer">
    <div class="footbox">
        <div class="line"></div>
        <div class="colums">
            <div class="col1">
                <h1>KeyDivide</h1>
                <p>made by people for people</p>
            </div>
            <div class="colinfo">
                <div class="col2">
                    <h1 class="coltitle">Магазин</h1>
                    <p class="coltext"><a href="#keyboards">Клавиатуры</a></p>
                    <p class="coltext"><a href="#services">Услуги</a></p>
                </div>
                <div class="col3">
                    <h1 class="coltitle">Соцсети</h1>
                    <a href="https://discord.gg/PKZ8ejUB8Z" target="_blank"><p class="coltext">Discord</p></a>
                    <a href="https://vk.com/cacao_keyboards" target="_blank"><p class="coltext">Вконтакте</p></a>
                    <a href="https://www.youtube.com/@cacaoboards7930/featured" target="_blank"><p class="coltext">YouTube</p></a>  
                </div>
                <div class="col4">
                    <h1 class="coltitle">Инфо</h1>
                    <p class="coltext"><a href="#aboutus">О нас</a></p>
                </div>
                <div class="col5">
                    <h1 class="coltitle">Контакты</h1>
                    <p>По поводу интересующих вопросов или предложений пишите нам в Discord или of_cacaoboards@mail.ru</p>
                </div>
            </div>
        </div>
    </div>
    <div class="by">
        <div class="byby">
            <p>©CacaoBoards All Rights Reserved</p>
            <p>Designed with ❤️ by neyman</p>
        </div>
    </div>
</div>

<script src="check_authorization.js"></script>

  

<script>
  document.addEventListener('DOMContentLoaded', async () => {
      await checkAuthAndDisplayUser();
    });
   
    let currentFilter = 'all'; // по умолчанию

// Функция открытия/закрытия выпадающего списка
function toggleFilterDropdown() {
  document.querySelector('.filter-dropdown').classList.toggle('active');
}

// Функция применения фильтра
function applyFilter(filter) {
  currentFilter = filter;

  // Обновляем текст кнопки
  const filterTextMap = {
    'all': 'Рекомендуемые',
    'asc': 'По возрастанию цены',
    'desc': 'По убыванию цены'
  };

  document.querySelector('.filter-text').textContent = filterTextMap[filter] || 'Фильтр';

  // Закрываем выпадающий список
  document.querySelector('.filter-dropdown').classList.remove('active');

  // Перезагружаем товары с новым фильтром
  displayProducts();
}

// Функция для отображения товаров из БД
async function displayProducts() {
  const productContainer = document.querySelector('.product-container');
  productContainer.innerHTML = '';

  try {
    const response = await fetch('http://localhost:5000/api/products');
    if (!response.ok) throw new Error('Ошибка загрузки товаров');
    
    let products = await response.json();

    if (currentFilter === 'asc') {
      products.sort((a, b) => a.price - b.price);
    } else if (currentFilter === 'desc') {
      products.sort((a, b) => b.price - a.price);
    }
    // 'all' — без сортировки, просто как есть

    products.forEach(product => {
      const prod_card = document.createElement('a');
      prod_card.classList.add('product-card');
      prod_card.href = product.link || `product.html?id=${product.id}`;

      const productImg = document.createElement('img');
      productImg.src = product.img || 'assets/images/default.jpg';
      productImg.alt = product.name;
      productImg.classList.add('product-card__img');
      prod_card.appendChild(productImg);

      const productName = document.createElement('h3');
      productName.textContent = product.name;
      productName.classList.add('product-card__name');
      prod_card.appendChild(productName);

      const productPrice = document.createElement('h4');
      productPrice.textContent = `${Math.round(product.price)} ₽`;
      productPrice.classList.add('product-card__price');
      prod_card.appendChild(productPrice);

      productContainer.appendChild(prod_card);
    });
  } catch (error) {
    console.error('Ошибка:', error);
    productContainer.innerHTML = '<p>Не удалось загрузить товары. Попробуйте позже.</p>';
  }
}

document.addEventListener('DOMContentLoaded', displayProducts);

// // Функция для отображения товаров из БД
// async function displayProducts() {
//   const productContainer = document.querySelector('.product-container');
//   productContainer.innerHTML = '';

//   try {
//     // Запрашиваем данные с сервера
//     const response = await fetch('http://localhost:5000/api/products');
//     if (!response.ok) throw new Error('Ошибка загрузки товаров');
    
//     let products = await response.json();

//     // Применяем фильтр
//     if (currentFilter === 'asc') {
//       products.sort((a, b) => a.price - b.price); // по возрастанию
//     } else if (currentFilter === 'desc') {
//       products.sort((a, b) => b.price - a.price); // по убыванию
//     }
//     // 'all' — без сортировки, просто как есть

//     // Отрисовка товаров
//     products.forEach(product => {
//       const in_card1 = document.createElement('a');
//       in_card1.classList.add('in_card1');
//       in_card1.href = product.link || '#';

//       const productImg = document.createElement('img');
//       productImg.src = product.img || 'assets/images/default.jpg';
//       productImg.alt = product.name;
//       in_card1.appendChild(productImg);

//       const productName = document.createElement('h4');
//       productName.textContent = product.name;
//       in_card1.appendChild(productName);

//       const productPrice = document.createElement('h5');
//       productPrice.textContent = `${product.price} ₽`;
//       in_card1.appendChild(productPrice);

//       productContainer.appendChild(in_card1);
//     });
//   } catch (error) {
//     console.error('Ошибка:', error);
//     productContainer.innerHTML = '<p>Не удалось загрузить товары. Попробуйте позже.</p>';
//   }
// }

// document.addEventListener('DOMContentLoaded', displayProducts);
</script>
<script src="services-fil.js"></script>

</body>
</html>
